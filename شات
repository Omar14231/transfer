-- سكريبت إشعار الصيانة (يضع في ServerScriptService)
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

-- مدة ظهور الإشعار (10 ثواني)
local NOTIFICATION_DURATION = 10

-- وظيفة عرض إشعار الصيانة للاعب
function showMaintenanceNotification(player)
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- إنشاء ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "MaintenanceNotification"
    screenGui.Parent = playerGui
    
    -- الإطار الرئيسي
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.8, 0, 0, 100)
    mainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- أحمر
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui
    
    -- زوايا مستديرة
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 15)
    corner.Parent = mainFrame
    
    -- ظل
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Thickness = 3
    stroke.Parent = mainFrame
    
    -- أيقونة الصيانة
    local iconLabel = Instance.new("TextLabel")
    iconLabel.Size = UDim2.new(0, 60, 1, 0)
    iconLabel.Position = UDim2.new(0, 10, 0, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = "🔧"
    iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    iconLabel.TextSize = 40
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.Parent = mainFrame
    
    -- نص الإشعار
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, -80, 1, 0)
    textLabel.Position = UDim2.new(0, 70, 0, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "🛠️ النظام قيد الصيانة\n⏰ الرجاء الانتظار..."
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextSize = 18
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextWrapped = true
    textLabel.Parent = mainFrame
    
    -- تأثير الظهور
    mainFrame.Position = UDim2.new(0.1, 0, -0.2, 0) -- بداية من خارج الشاشة
    local slideIn = TweenService:Create(
        mainFrame,
        TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {Position = UDim2.new(0.1, 0, 0.1, 0)}
    )
    slideIn:Play()
    
    -- تأثير الاهتزاز
    local shakeTween = TweenService:Create(
        mainFrame,
        TweenInfo.new(0.1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, 5, true),
        {Position = UDim2.new(0.1, 0, 0.1, 0)}
    )
    shakeTween:Play()
    
    -- إزالة الإشعار بعد 10 ثواني
    delay(NOTIFICATION_DURATION, function()
        local slideOut = TweenService:Create(
            mainFrame,
            TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In),
            {Position = UDim2.new(0.1, 0, -0.2, 0)}
        )
        slideOut:Play()
        
        delay(0.5, function()
            screenGui:Destroy()
        end)
    end)
end

-- عند دخول لاعب جديد
function onPlayerAdded(player)
    -- عرض إشعار الصيانة فور دخول اللاعب
    showMaintenanceNotification(player)
    
    print("🔧 إشعار الصيانة ظهر للاعب: " .. player.Name)
end

-- عند مغادرة لاعب
function onPlayerRemoving(player)
    print("🚪 لاعب غادر أثناء الصيانة: " .. player.Name)
end

-- الاستماع للأحداث
Players.PlayerAdded:Connect(onPlayerAdded)
Players.PlayerRemoving:Connect(onPlayerRemoving)

-- عرض الإشعار للاعبين الموجودين
for _, player in pairs(Players:GetPlayers()) do
    onPlayerAdded(player)
end

print("✅ نظام إشعار الصيانة يعمل بنجاح!")
print("🔧 جميع اللاعبين يشاهدون إشعار الصيانة")
print("⏰ الإشعار سيختفي بعد 10 ثواني")
