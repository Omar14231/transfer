-- Script (ÙŠØ¶Ø¹ ÙÙŠ ServerScriptService)
local Players = game:GetService("Players")
local TextService = game:GetService("TextService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Øª
local CHAT_DURATION = 15 -- Ù…Ø¯Ø© Ø¸Ù‡ÙˆØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙˆÙ‚ Ø§Ù„Ø±Ø£Ø³ (Ø«Ø§Ù†ÙŠØ©)
local MAX_MESSAGE_LENGTH = 100 -- Ø£Ù‚ØµÙ‰ Ø·ÙˆÙ„ Ù„Ù„Ø±Ø³Ø§Ù„Ø©

-- ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª
local playerGuis = {}
local chatMessages = {}

-- ÙˆØ¸ÙŠÙØ© Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø´Ø§Øª Ù„Ù„Ø§Ø¹Ø¨
function createChatGUI(player)
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- Ø¥Ù†Ø´Ø§Ø¡ ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "GlobalChat"
    screenGui.Parent = playerGui
    
    -- Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù…ØµØºØ± Ù„Ù„Ø¬ÙˆØ§Ù„)
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.9, 0, 0.7, 0) -- 90% Ø¹Ø±Ø¶, 70% Ø§Ø±ØªÙØ§Ø¹
    mainFrame.Position = UDim2.new(0.05, 0, 0.15, 0) -- ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Visible = false -- Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    mainFrame.Parent = screenGui
    
    -- Ø²ÙˆØ§ÙŠØ§ Ù…Ø³ØªØ¯ÙŠØ±Ø©
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = mainFrame
    
    -- Ø¸Ù„
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(100, 100, 200)
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    -- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´Ø§Øª
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 35)
    titleLabel.Position = UDim2.new(0, 0, 0, 0)
    titleLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 80)
    titleLabel.Text = "Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ù… ğŸ’¬ (v1.1)"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Parent = mainFrame
    
    -- Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 10)
    titleCorner.Parent = titleLabel
    
    -- Ø²Ø± Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (ØªÙ… Ù†Ù‚Ù„Ù‡ Ù„Ù„ÙŠÙ…ÙŠÙ†)
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 25, 0, 25)
    closeButton.Position = UDim2.new(1, -30, 0, 5) -- ÙŠÙ…ÙŠÙ†
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.TextSize = 14
    closeButton.Font = Enum.Font.GothamBold
    closeButton.Parent = titleLabel
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 6)
    closeCorner.Parent = closeButton
    
    -- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø¬Ù„ (Ø£ØµØºØ± Ù„Ù„Ø¬ÙˆØ§Ù„) - Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø³Ø­Ø¨
    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Size = UDim2.new(1, -10, 1, -120)
    scrollFrame.Position = UDim2.new(0, 5, 0, 40)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.BorderSizePixel = 0
    scrollFrame.ScrollBarThickness = 6 -- Ø£Ø³Ù…Ùƒ
    scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 200)
    scrollFrame.VerticalScrollBarInset = Enum.ScrollBarInset.Always
    scrollFrame.Parent = mainFrame
    
    -- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
    local messageList = Instance.new("UIListLayout")
    messageList.Padding = UDim.new(0, 5) -- Ù…Ø³Ø§ÙØ© Ø£ÙƒØ¨Ø± Ø¨ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
    messageList.Parent = scrollFrame
    
    -- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© (Ù…ØµØºØ±Ø©)
    local inputFrame = Instance.new("Frame")
    inputFrame.Size = UDim2.new(1, -10, 0, 35)
    inputFrame.Position = UDim2.new(0, 5, 1, -35)
    inputFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    inputFrame.BorderSizePixel = 0
    inputFrame.Parent = mainFrame
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 6)
    inputCorner.Parent = inputFrame
    
    -- Ø­Ù‚Ù„ Ø§Ù„Ù†Øµ (Ù…ØµØºØ±)
    local textBox = Instance.new("TextBox")
    textBox.Size = UDim2.new(1, -60, 1, -6)
    textBox.Position = UDim2.new(0, 5, 0, 3)
    textBox.BackgroundTransparency = 1
    textBox.Text = ""
    textBox.PlaceholderText = "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."
    textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textBox.TextSize = 12
    textBox.Font = Enum.Font.Gotham
    textBox.TextXAlignment = Enum.TextXAlignment.Left
    textBox.Parent = inputFrame
    
    -- Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ù…ØµØºØ±)
    local sendButton = Instance.new("TextButton")
    sendButton.Size = UDim2.new(0, 50, 1, -6)
    sendButton.Position = UDim2.new(1, -55, 0, 3)
    sendButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
    sendButton.Text = "Ø¥Ø±Ø³Ø§Ù„"
    sendButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    sendButton.TextSize = 12
    sendButton.Font = Enum.Font.GothamBold
    sendButton.Parent = inputFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 5)
    buttonCorner.Parent = sendButton
    
    -- Ø²Ø± ÙØªØ­ Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø£Ø­Ù…Ø± - ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†) Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª
    local openChatButton = Instance.new("TextButton")
    openChatButton.Size = UDim2.new(0, 70, 0, 70) -- Ø­Ø¬Ù… Ø£ÙƒØ¨Ø±
    openChatButton.Position = UDim2.new(1, -80, 0, 50) -- ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†
    openChatButton.BackgroundColor3 = Color3.fromRGB(128, 0, 128) -- Ø¨Ù†ÙØ³Ø¬ÙŠ
    openChatButton.Text = "ğŸ’¬"
    openChatButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    openChatButton.TextSize = 24
    openChatButton.Font = Enum.Font.GothamBold
    openChatButton.Parent = screenGui
    
    local openChatCorner = Instance.new("UICorner")
    openChatCorner.CornerRadius = UDim.new(0, 15) -- Ø²ÙˆØ§ÙŠØ§ Ø£ÙƒØ«Ø± Ø§Ø³ØªØ¯Ø§Ø±Ø©
    openChatCorner.Parent = openChatButton
    
    -- ØªØ£Ø«ÙŠØ± ØªØ¯Ø±Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„Ø²Ø±
    local colorSequence = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(128, 0, 128)),  -- Ø¨Ù†ÙØ³Ø¬ÙŠ
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 0, 255)), -- Ù…Ø§Ø¬Ù†ØªØ§
        ColorSequenceKeypoint.new(1, Color3.fromRGB(75, 0, 130))  -- Ù†ÙŠÙ„ÙŠ
    })
    
    local uigradient = Instance.new("UIGradient")
    uigradient.Color = colorSequence
    uigradient.Rotation = 45
    uigradient.Parent = openChatButton
    
    -- ØªØ£Ø«ÙŠØ± Ø§Ù„ÙˆÙ…ÙŠØ¶
    local pulseTween = TweenService:Create(
        uigradient,
        TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
        {Rotation = 405} -- Ø¯ÙˆØ±Ø§Ù† ÙƒØ§Ù…Ù„ + 45
    )
    pulseTween:Play()
    
    -- ØªØ£Ø«ÙŠØ± Ø§Ù„Ø·ÙÙˆ (ÙŠØªØ­Ø±Ùƒ Ù‚Ù„ÙŠÙ„Ø§Ù‹)
    local floatTween = TweenService:Create(
        openChatButton,
        TweenInfo.new(3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
        {Position = UDim2.new(1, -80, 0, 45)} -- ÙŠØªØ­Ø±Ùƒ Ù„Ø£Ø¹Ù„Ù‰ Ù‚Ù„ÙŠÙ„Ø§Ù‹
    )
    floatTween:Play()
    
    -- Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    playerGuis[player] = {
        Gui = screenGui,
        MainFrame = mainFrame,
        ScrollFrame = scrollFrame,
        TextBox = textBox,
        SendButton = sendButton,
        CloseButton = closeButton,
        OpenChatButton = openChatButton,
        IsVisible = false
    }
    
    -- Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    sendButton.MouseButton1Click:Connect(function()
        sendMessage(player, textBox.Text)
        textBox.Text = ""
    end)
    
    textBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            sendMessage(player, textBox.Text)
            textBox.Text = ""
        end
    end)
    
    closeButton.MouseButton1Click:Connect(function()
        toggleChatVisibility(player)
    end)
    
    openChatButton.MouseButton1Click:Connect(function()
        toggleChatVisibility(player)
    end)
    
    return playerGuis[player]
end

-- ÙˆØ¸ÙŠÙØ© ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø§Øª
function toggleChatVisibility(player)
    local guiData = playerGuis[player]
    if not guiData then return end
    
    guiData.IsVisible = not guiData.IsVisible
    guiData.MainFrame.Visible = guiData.IsVisible
    guiData.OpenChatButton.Visible = not guiData.IsVisible
    
    if guiData.IsVisible then
        -- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­Ù‡
        updateChatGUI(player)
        -- Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„ØªØ±ÙƒÙŠØ² Ù„Ø­Ù‚Ù„ Ø§Ù„Ù†Øµ
        guiData.TextBox:CaptureFocus()
        
        -- Ø§Ù„ØªÙ…Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø£Ø­Ø¯Ø«
        delay(0.1, function()
            if guiData.ScrollFrame then
                guiData.ScrollFrame.CanvasPosition = Vector2.new(0, guiData.ScrollFrame.AbsoluteCanvasSize.Y)
            end
        end)
    end
end

-- ÙˆØ¸ÙŠÙØ© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
function sendMessage(sender, message)
    if string.len(message) == 0 or string.len(message) > MAX_MESSAGE_LENGTH then
        return
    end
    
    -- ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø®Ø·ÙŠØ±Ø©
    message = string.gsub(message, "[<>]", "")
    
    -- Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹
    table.insert(chatMessages, {
        Player = sender,
        Message = message,
        Timestamp = os.time()
    })
    
    -- Ø¨Ø« Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
    for _, player in pairs(Players:GetPlayers()) do
        -- Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙˆÙ‚ Ø±Ø£Ø³ Ø§Ù„Ù…Ø±Ø³Ù„
        showMessageAboveHead(sender, message, player)
        
        -- ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø´Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙØªÙˆØ­Ø©
        if playerGuis[player] and playerGuis[player].IsVisible then
            updateChatGUI(player)
            
            -- Ø§Ù„ØªÙ…Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø£Ø­Ø¯Ø«
            delay(0.1, function()
                local guiData = playerGuis[player]
                if guiData and guiData.ScrollFrame then
                    guiData.ScrollFrame.CanvasPosition = Vector2.new(0, guiData.ScrollFrame.AbsoluteCanvasSize.Y)
                end
            end)
        end
    end
    
    -- Ø·Ø¨Ø§Ø¹Ø© ØªØ£ÙƒÙŠØ¯ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
    print("ğŸ“¢ " .. sender.Name .. " Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø©: " .. message)
end

-- ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙˆÙ‚ Ø§Ù„Ø±Ø£Ø³
function showMessageAboveHead(sender, message, receiver)
    local character = sender.Character
    if not character then return end
    
    local head = character:FindFirstChild("Head")
    if not head then return end
    
    -- Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    for _, obj in pairs(head:GetChildren()) do
        if obj.Name == "ChatMessage" then
            obj:Destroy()
        end
    end
    
    -- Ø¥Ù†Ø´Ø§Ø¡ BillboardGui Ù„Ù„Ø±Ø³Ø§Ù„Ø©
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ChatMessage"
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 2.5, 0)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 100 -- Ù…Ø³Ø§ÙØ© Ø±Ø¤ÙŠØ© Ø£ÙƒØ¨Ø±
    billboard.Parent = head
    
    -- Ø¥Ø·Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    local messageFrame = Instance.new("Frame")
    messageFrame.Size = UDim2.new(1, 0, 1, 0)
    messageFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    messageFrame.BackgroundTransparency = 0.3
    messageFrame.Parent = billboard
    
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = messageFrame
    
    -- Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, -8, 1, -8)
    messageLabel.Position = UDim2.new(0, 4, 0, 4)
    messageLabel.BackgroundTransparency = 1
    messageLabel.Text = sender.Name .. ": " .. message
    messageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    messageLabel.TextSize = 12
    messageLabel.Font = Enum.Font.GothamBold
    messageLabel.TextWrapped = true
    messageLabel.TextScaled = true
    messageLabel.Parent = messageFrame
    
    -- Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
    delay(CHAT_DURATION, function()
        if billboard and billboard.Parent then
            billboard:Destroy()
        end
    end)
end

-- ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø´Ø§Øª Ù„Ù„Ø¬Ù…ÙŠØ¹
function updateAllChatGuis()
    for player, guiData in pairs(playerGuis) do
        if player and player.Parent and guiData.IsVisible then
            updateChatGUI(player)
        end
    end
end

-- ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø´Ø§Øª Ù„Ù„Ø§Ø¹Ø¨
function updateChatGUI(player)
    local guiData = playerGuis[player]
    if not guiData then return end
    
    local scrollFrame = guiData.ScrollFrame
    scrollFrame:ClearAllChildren()
    
    -- Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø­Ø¯Ø«
    for i = 1, #chatMessages do
        local messageData = chatMessages[i]
        if messageData then
            createMessageLabel(scrollFrame, messageData.Player, messageData.Message, messageData.Timestamp, i)
        end
    end
    
    -- ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ Ù„Ù„Ø³Ø­Ø¨
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, scrollFrame.UIListLayout.AbsoluteContentSize.Y)
end

-- ÙˆØ¸ÙŠÙØ© Ø¥Ù†Ø´Ø§Ø¡ ØªØ³Ù…ÙŠØ© Ù„Ù„Ø±Ø³Ø§Ù„Ø© (Ù…ØµØºØ±Ø© Ù„Ù„Ø¬ÙˆØ§Ù„)
function createMessageLabel(parent, player, message, timestamp, index)
    local messageFrame = Instance.new("Frame")
    messageFrame.Size = UDim2.new(1, 0, 0, 0)
    messageFrame.BackgroundTransparency = 1
    messageFrame.AutomaticSize = Enum.AutomaticSize.Y
    messageFrame.Parent = parent
    
    local messageLayout = Instance.new("UIListLayout")
    messageLayout.Parent = messageFrame
    
    -- Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
    local playerLabel = Instance.new("TextLabel")
    playerLabel.Size = UDim2.new(1, 0, 0, 18)
    playerLabel.BackgroundTransparency = 1
    playerLabel.Text = player.Name
    playerLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
    playerLabel.TextSize = 12
    playerLabel.Font = Enum.Font.GothamBold
    playerLabel.TextXAlignment = Enum.TextXAlignment.Left
    playerLabel.Parent = messageFrame
    
    -- Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 0, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = message
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextSize = 13
    textLabel.Font = Enum.Font.Gotham
    textLabel.TextWrapped = true
    textLabel.TextXAlignment = Enum.TextXAlignment.Left
    textLabel.AutomaticSize = Enum.AutomaticSize.Y
    textLabel.Parent = messageFrame
    
    -- Ø§Ù„ÙˆÙ‚Øª
    local timeLabel = Instance.new("TextLabel")
    timeLabel.Size = UDim2.new(1, 0, 0, 14)
    timeLabel.BackgroundTransparency = 1
    timeLabel.Text = os.date("%H:%M", timestamp)
    timeLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
    timeLabel.TextSize = 10
    timeLabel.Font = Enum.Font.Gotham
    timeLabel.TextXAlignment = Enum.TextXAlignment.Left
    timeLabel.Parent = messageFrame
end

-- Ø¹Ù†Ø¯ Ø¯Ø®ÙˆÙ„ Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯
function onPlayerAdded(player)
    -- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø§Øª ÙÙˆØ±Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ©
    createChatGUI(player)
    updateChatGUI(player)
    
    -- Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
    print("ğŸ® Ù„Ø§Ø¹Ø¨ Ø§Ù†Ø¶Ù…: " .. player.Name .. " - Ø§Ù„Ø´Ø§Øª Ø¬Ø§Ù‡Ø²!")
end

-- Ø¹Ù†Ø¯ Ù…ØºØ§Ø¯Ø±Ø© Ù„Ø§Ø¹Ø¨
function onPlayerRemoving(player)
    if playerGuis[player] then
        playerGuis[player].Gui:Destroy()
        playerGuis[player] = nil
    end
    print("ğŸšª Ù„Ø§Ø¹Ø¨ ØºØ§Ø¯Ø±: " .. player.Name)
end

-- Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø«
Players.PlayerAdded:Connect(onPlayerAdded)
Players.PlayerRemoving:Connect(onPlayerRemoving)

-- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†
for _, player in pairs(Players:GetPlayers()) do
    onPlayerAdded(player)
end

print("âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ (v1.1) ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!")
print("ğŸ“± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø¨Ø¹Ø¶Ù‡Ù… Ø§Ù„Ø¨Ø¹Ø¶")
print("ğŸ’¬ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ø¨Ù†ÙØ³Ø¬ÙŠ Ø§Ù„Ù…ØªØ­Ø±Ùƒ Ù„ÙØªØ­ Ø§Ù„Ø´Ø§Øª")
print("ğŸ”„ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ø§Ù„Ø´Ø§Øª Ù„Ø£Ø¹Ù„Ù‰ ÙˆÙ„Ø£Ø³ÙÙ„ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„")
